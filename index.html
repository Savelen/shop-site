<!DOCTYPE html>
<html>

<head>
	<title>Shop</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="Style/Style.css">
</head>

<body>
	<header>
		<!-- Логотип и Меню -->
		<div class="menu">
			<a href="#"><img class="card" src="Style/Image/icon/shopping-cart.png" alt=""></a>
			<div class="menu-sub">
				<a href="#">Главная</a>
				<a href="#">Товары</a>
			</div>
		</div>

		<!-- Приветственный Текст -->
		<div class="message">
			<h1>Наша одежда, ваш комфорт</h1>
			<p>
				Текст Рыба: Явные признаки победы институционализации
				подвергнуты целой серии независимых исследований.Высокое качество позиционных исследований
			</p>
		</div>
		<div class="arrow"><span class="arrow-down"></span></div>
	</header>
	<!-- Католог товаров -->
	<section class="item">
		<!-- Форма выбота типа продукта -->
		<div class="backgraung-item"></div>
		<div class="item__menu">
			<div class="item-checkbox">
				<div class="item-checkbox__contain">
					<label class="item-checkbox__label">
						<input type="checkbox" value="1" name="men" data-once="1">
						<span class="checkmark"></span>
						МУЖСКАЯ
					</label>
					<label class="item-checkbox__label">
						<input type="checkbox" value="1" name="women" data-once="1">
						<span class="checkmark"></span>
						ЖЕНСКАЯ
					</label>
					<label class="item-checkbox__label kids">
						<input type="checkbox" value="2" name="kids" data-once="1">
						<span class="checkmark"></span>
						ДЕТСКАЯ
					</label>
				</div>
				<div class="item-checkbox__contain">
					<button class="all-item" type="submit" name="item_all" data-activ="0">
						<p>ПОКАЗАТЬ ВСЕ ТОВАРЫ </p>
					</button>
				</div>
			</div>
		</div>

		<!-- Каталог -->
		<div class="catalog__item">
			<div class="men">
				<div class="catalog__men">
					<p class="catalog-men__header">МУЖСКАЯ</p>
					<div class="border__1"></div>
				</div>
				<!-- PHP код генерирует контент -->
				<!-- HTML/CSS и JS Слот товара-->
				<div class="pagination pagination-men" data-gender="slot-men">
					<span class="arrow arrow-left" data-gender="men" data-start='0' data-get='3' data-go='-3'></span>
					<span class="text">0/0</span>
					<span class="arrow arrow-right" data-gender="men" data-start='3' data-get='3' data-go='3'></span>
				</div>
				<div class="slot slot-men">
					<!-- Слот товара -->
					<div class="slot-item-hidden">
						<div class="select">
							<select class="size__item" name="kyky">
								<option disabled selected> РАЗМЕР</option>
							</select>
							<span class="arrow"></span>
						</div>
						<div class="color-item">
							<!-- js предлогает выбрать цвет -->
						</div>
						<div class="item__image"></div>
						<div class="name__item"></div>
						<div class="cost__item"></div>
					</div>

					<!-- Конец слот товара -->
				</div>
			</div>
			<div class="women">
				<div class="catalog__women">
					<p class="catalog-women__header">ЖЕНСКАЯ</p>
					<div class="border__2"></div>
				</div>
				<div class="pagination pagination-women" data-gender="slot-women">
					<span class="arrow arrow-left" data-gender="women" data-start='0' data-get='3' data-go='-3'></span>
					<span class="text">0/0</span>
					<span class="arrow arrow-right" data-gender="women" data-start='3' data-get='3' data-go='3'></span>
				</div>
				<div class="slot slot-women"></div>
			</div>
			<div class="show-all-item">
				<div class="flex-contain">
					<p class="catalog-women__header">ВСЕ ТОВАРЫ</p>
					<div class="border__2"></div>
				</div>
				<div class="slot"></div>
			</div>
		</div>
	</section>

	<!-- О нас -->
	<section class="about">
		<!-- о нас кратко -->
		<div>
			<h1>О НАС</h1>
			<p>
				Текст Рыба: Внезапно, интерактивные прототипы, превозмогая сложившуюся непростую экономическую ситуацию,
				объединены в целые кластеры себе подобных. Вот вам яркий пример современных тенденций - перспективное
				планирование способствует подготовке и реализации системы массового участия. Прежде всего, сложившаяся
				структура организации обеспечивает актуальность как самодостаточных, так и внешне зависимых концептуальных
				решений.
			</p>
		</div>
	</section>

	<!-- Футер -->
	<footer>
		<!-- социальные сети -->
		<div class="soc_web">
			<a href="#"><img src="Style/Image/soc/Twitter.png" alt="" class="twitter"></a>
			<a href="#"><img src="Style/Image/soc/facebook.png" alt="" class="facebook"></a>
			<a href="#"><img src="Style/Image/soc/vk.png" alt="" class="VK"></a>
		</div>

		<!-- Список ссылок -->
		<div class="footer_menu">
			<div>
				<a href="#" class="futer__menu"> ПОМОЩЬ </a><span>|</span>
				<a href="#" class="futer__menu"> ПОЛИТИКА КОНФИДЕНЦИАЛЬНОСТИ </a><span>|</span>
				<a href="#" class="futer__menu"> О НАС </a><span>|</span>
				<a href="#" class="futer__menu"> КОНТАКТЫ</a>
			</div>
		</div>
	</footer>
	<!-- *скрол в низ -->
	<script type="text/javascript">
		let down = document.querySelector('span.arrow-down');
		down.addEventListener("click", () => document.querySelector('section.item').scrollIntoView({ behavior: "smooth" }));
	</script>
	<script src="js/pagination.js"></script>
	<script src="js/travel-pagination.js"></script>
	<!-- *пагинация -->
	<script type="text/javascript">
		// Первая генерация, а также показ и сокрытие блоков с карточками
		// <!-- *Функция для сокрытия показа блоков в зависимости от checkbox -->
		let slot = {
			check: [],
			show_slot: function () {
				let slot = document.querySelector('div.item-checkbox').querySelectorAll('input');
				let but = document.querySelector('button.all-item');
				let activ = {
					'but': but.dataset.activ,
					'checkEnable': [],
					'checkDusable': []
				}
				slot.forEach(s => {
					if (s.checked && s.name != 'kids') activ.checkEnable.push(s);
					else if (!s.checked && s.name != 'kids') activ.checkDusable.push(s);
				});
				if (activ.but == 0 && activ.checkEnable.length != 0) {
					document.querySelector('div.catalog__item').style.display = "block";
					document.querySelector('div.show-all-item').style.display = "none";
					activ.checkEnable.forEach(c => document.querySelector('div.' + c.name).style.display = "block");
					activ.checkDusable.forEach(c => document.querySelector('div.' + c.name).style.display = "none");
				}
				else if (activ.but == 1 && activ.checkEnable.length != 0) {
					document.querySelector('div.catalog__item').style.display = "block";
					document.querySelector('div.show-all-item').style.display = "block";
					activ.checkEnable.forEach(c => document.querySelector('div.' + c.name).style.display = "none");
					activ.checkDusable.forEach(c => document.querySelector('div.' + c.name).style.display = "none");
				}
				else if (activ.checkEnable.length == 0) {
					document.querySelector('div.catalog__item').style.display = "none";
					document.querySelector('div.show-all-item').style.display = "none";
					activ.checkDusable.forEach(c => document.querySelector('div.' + c.name).style.display = "none");
				}
			},
			add_slot: function () {
				slot.show_slot();
				if (this.checked && this.name != "kids") {
					// проверяем активен ли cheackbox kids если да, то меняем генерацию
					let kid = document.querySelector("label.kids").querySelector("input");
					if (!kid.checked) {
						this.dataset.once = 0;
						let rem = document.querySelector('div.' + this.name).querySelectorAll('div.slot_item');
						rem.forEach(r => r.parentElement.removeChild(r));
						ajax_conect(this.name);
						count_list(0, 'u');
					}
					if (kid.checked) {
						this.dataset.once = 0;
						let rem = document.querySelector('div.' + this.name).querySelectorAll('div.slot_item');
						rem.forEach(r => r.parentElement.removeChild(r));
						ajax_conect(this.name, 0, 3, 1);
						count_list(0, 'u');
					}
				}
				else if (this.name == "kids") {
					if (this.checked) {
						// говорим показывать детскую одежду
						let kid = document.querySelectorAll('div.pagination');
						kid.forEach(k => {
							let a = k.querySelectorAll('span.arrow');
							a[0].dataset.start = 0;
							a[1].dataset.start = 3;
						});
						// выдаём детскую
						if (slot.check[0].checked) {
							// удаляем взрослую одежду
							let rem = document.querySelector("div.slot-men").querySelectorAll('div.slot_item');
							rem.forEach(r => r.parentElement.removeChild(r));
							ajax_conect("men", 0, 3, 1);
							count_list(0, 'men', 1);
						}
						if (slot.check[1].checked) {
							// удаляем взрослую одежду
							let rem = document.querySelector("div.slot-women").querySelectorAll('div.slot_item');
							rem.forEach(r => r.parentElement.removeChild(r));
							ajax_conect("women", 0, 3, 1);
							count_list(0, 'women', 1);
						}
					}
					else {
						// готовим показывать взрослую одежду
						let kid = document.querySelectorAll('div.pagination');
						kid.forEach(k => {
							let a = k.querySelectorAll('span.arrow');
							a[0].dataset.start = 0;
							a[1].dataset.start = 3;
						});
						// удаляем дктскую одежду
						let rem = document.querySelectorAll('div.slot_item');
						rem.forEach(r => r.parentElement.removeChild(r));
						// генерируем взрослую
						if (slot.check[0].checked) {
							// удаляем взрослую одежду
							ajax_conect("men");
							count_list(0, 'u');
						}
						if (slot.check[1].checked) {
							// удаляем взрослую одежду
							ajax_conect("women");
							count_list(0, 'u');
						}

					}
				}
			},
			all_slot: function () { }
		}
		let label = document.querySelector('div.item-checkbox').querySelectorAll('input');
		slot.check.push(label[0], label[1]);
		label.forEach(lab => {
			lab.addEventListener('click', slot.add_slot);
		});
		// <!--* Все товары--> --------------------------------------------------------------------
		// button.addEventListener("click", () => {

		// 	let label = document.querySelector('div.item-checkbox').querySelectorAll('input');
		// 	if (button.dataset.activ == 1) {
		// 		document.querySelector('div.catalog__item').style.display = 'block';
		// 		button.querySelector('p').textContent = "скрыть все товары";
		// 		button.dataset.activ = 0;
		// 		label.forEach(lab => {

		// 		});
		// 	}
		// 	else if (button.dataset.activ == 0) {
		// 		document.querySelector('div.catalog__item').style.display = 'none';
		// 		button.querySelector('p').textContent = "показать все товары";
		// 		button.dataset.activ = 1;
		// 	}
		// });
	</script>
	<!-- *смена картинки (цвет) -->
	<script>
		// смена картинки при нажатии на круги с цветом товара
		function go() {
			let img_arr = document.querySelectorAll('li');
			img_arr.forEach(link => {
				link.addEventListener("click", () => {
					let img = link.querySelector('a');
					let up_elem = (iterac = 2) => {
						let parent_el = link.parentElement;
						for (i = 0; i < iterac; i++) {
							parent_el = parent_el.parentElement;
						}
						return parent_el;
					}
					let old_img = up_elem().querySelector('img');
					old_img.addEventListener("animationend", () => {
						old_img.style.animationName = '';
					});
					old_img.style = "animation: hidden 0.4s linear 1 forwards";
					setTimeout(() => {
						old_img.src = img.href;
					}, 200);

				});
			})
		}
	</script>

</body>

</html>