<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Shop test site</title>
	<link rel="stylesheet" href="Style/style.css">
</head>

<body>
	<header>
		<!-- Фон -->
		<picture class="background">
			<source srcset="/Style/Image/bg/background5909-3546.webp" type="Image/webp" media="(min-width: 1920px)">
			<source srcset="/Style/Image/bg/background1920-1080.webp" type="Image/webp" media="(min-width: 1280px)">
			<source srcset="/Style/Image/bg/background1280-720.webp" type="Image/webp" media="(max-width: 1280px)">
			<img class="background__img" src="/Style/Image/item/img1.png" alt="">
		</picture>
		<!-- Логотип и Меню -->
		<div class="menu menu_follow_false">
			<img src="/Style/Image/icon/Livello.png" alt="" class="menu__logo logo logo_follow_false">
			<div class="menu__but-menu but-menu but-menu_follow_false">
				<span class="but-menu__header">Главная</span>
				<span class="but-menu__item">Товары</span>
				<img src="Style/Image/icon/shopping-cart.png" alt="" class="but-menu__card">
			</div>

		</div>
		<!-- Приветственный Текст -->
		<div class="message">
			<h1>Наша одежда, ваш комфорт</h1>
			<p>
				Lorem ipsum dolor sit, amet consectetur adipisicing elit. Laboriosam minima placeat vel ex provident omnis
				necessitatibus dolorum eligendi est aperiam cumque veniam, sunt facere blanditiis maxime deserunt ipsum
			</p>
		</div>
		<!-- Стрелка в низ -->
		<div class="arrow">
			<sapn class="arrow__bg"></sapn><span class="arrow__down"></span>
		</div>
	</header>

	<section class="item">
		<!-- *фильтр товара -->
		<div class="menu-filtr">
			<div class="menu-filtr__item-filter item-filter">
				<div class="item-filter__checkbox-item checkbox-item">
					<label class="checkbox-item__label">
						<input type="checkbox" name="men" class="checkbox-item__checkbox">
						<span class="checkbox-item__checkmark"></span>
						<h3 class="checkbox-item__people">мужская</h3>
					</label>
					<label class="checkbox-item__label">
						<input type="checkbox" name="women" class="checkbox-item__checkbox">
						<span class="checkbox-item__checkmark"></span>
						<h3 class="checkbox-item__people">женская</h3>
					</label>
					<label class="checkbox-item__label">
						<input type="checkbox" name="kids" class="checkbox-item__checkbox">
						<span class="checkbox-item__checkmark"></span>
						<h3 class="checkbox-item__people">детская</h3>
					</label>
				</div>
				<div class="item-filter__button-item button-item">
					<button class="button-item__all-item" data-activ="0">показать все товары</button>
				</div>
			</div>
		</div>
		<!-- *Каталог  -->
		<div class="catalog-item">
			<!-- *Мужской отдел -->
			<div class="catalog-item__men men">
				<div class="men__header">
					<h2 class="men__name">мужская</h2>
					<div class="men__border"></div>
				</div>
				<div class="men__pagination pagination">
					<span class="pagination__arrow pagination__arrow_left" data-gender="men" data-start='0' data-get="3"
						data-go='-3'></span>
					<span class="pagination__text">0/0</span>
					<span class="pagination__arrow pagination__arrow_right" data-gender="men" data-start='3' data-get="3"
						data-go='-3'></span>

				</div>
				<div class="men__slot slot">
					<!-- Слот товара -->
					<div class="slot-item slot-item_hidden">
						<div class="slot-item__header-part-slot">
							<!-- выбор размера -->
							<div class="slot-item__select-size select-size">
								<select class="select-size__size-item">
									<option disabled selected>размер</option>
								</select>
								<div class="select-size__arrow-bg">
									<!-- <span class="select-size__arrow-select"></span> -->
								</div>

							</div>
							<!-- выбор цвета -->
							<div class="men__color-item color-item">
							</div>
						</div>
						<div class="slot-item__image">
						</div>
						<div class="slot-item__footer-part-slot">
							<div class="slot-item__name"></div>
							<div class="slot-item__cost"></div>
						</div>

					</div>
				</div>
			</div>
			<!-- *Женский отдел -->
			<div class="catalog-item__women women">
				<div class="women__header">
					<div class="women__border"></div>
					<h2 class="women__name">женская</h2>
				</div>
				<div class="women__pagination pagination">
					<span class="pagination__arrow pagination__arrow_left" data-gender="women" data-start='0' data-get="3"
						data-go='-3'></span>
					<span class="pagination__text">0/0</span>
					<span class="pagination__arrow pagination__arrow_right" data-gender="women" data-start='3' data-get="3"
						data-go='3'></span>
				</div>
				<div class="women__slot slot"></div>
			</div>
			<!-- *Показ всех предметов -->
			<div class="catalog-item__all-item all-item">
				<div class="all-item__header">
					<h2 class="all-item__name">все товары</h2>
					<div class="all-item__border"></div>
				</div>
				<div class="all-item__slot slot"></div>
			</div>
		</div>
	</section>

	<section class="about">
		<div class="about-message">
			<h2 class="about-message__header">о нас</h2>
			<p class="about-message__text">Lorem ipsum, dolor sit amet consectetur adipisicing elit. Non aut illo aliquam commodi obcaecati ex rerum,
				illum blanditiis dolor maiores atque est nobis asperiores vitae quos suscipit doloremque impedit ducimus,
				veniam beatae eius eligendi, cupiditate voluptatum aperiam. Pariatur, repudiandae incidunt. Reprehenderit
				quibusdam, delectus nostrum sapiente optio dolorem laudantium nulla iusto! Quae voluptates praesentium quis
				assumenda soluta! Aspernatur nostrum suscipit tenetur.</p>
		</div>
	</section>
	<footer>
		<div class="soc-web">
			<a class="soc-web__link" href="#">
				<img class="soc-web__ico" src="Style/Image/soc/Twitter.png" alt="">
			</a>
			<a class="soc-web__link" href="#">
				<img class="soc-web__ico" src="Style/Image/soc/facebook.png" alt="">
			</a>
			<a class="soc-web__link" href="#">
				<img class="soc-web__ico" src="Style/Image/soc/vk.png" alt="">
			</a>
		</div>
		<div class="footer-menu">
			<div class="but">
				<a href="#" class="footer-menu__link">помощь</a>
				<span class="delimiter">|</span>
				<a href="#" class="footer-menu__link">политика конфиденциальности</a>
				<span class="delimiter">|</span>
				<a href="#" class="footer-menu__link">о нас</a>
				<span class="delimiter">|</span>
				<a href="#" class="footer-menu__link">контакты</a>
			</div>
		</div>
	</footer>
	<script>
		let menu = document.querySelector('.menu_follow_false');
		let logo = document.querySelector('.logo_follow_false');
		let menu_but = document.querySelector('.but-menu_follow_false');
		window.addEventListener("scroll", () => {
			if (window.pageYOffset != 0) {
				menu.className = "menu menu_follow_true";
				logo.className = "menu__logo logo logo_follow_true";
				menu_but.className = "menu__but-menu but-menu but-menu_follow_true";

			}
			else {
				menu.className = "menu menu_follow_false";
				logo.className = "menu__logo logo logo_follow_false";
				menu_but.className = "menu__but-menu but-menu but-menu_follow_false";
			}
		});
		let down = document.querySelector('.arrow');
		down.addEventListener("click", () => document.querySelector('.arrow').scrollIntoView({ behavior: "smooth" }));
		// скрол по кнопке
		down = document.querySelector('.but-menu__item');
		down.addEventListener("click", () => document.querySelector('.arrow').scrollIntoView({ behavior: "smooth" }));
		down = document.querySelector('.but-menu__header');
		down.addEventListener("click", () => document.querySelector('header').scrollIntoView({ behavior: "smooth" }));
		// ----------------------------------------------------
		let button = document.querySelector('.button-item__all-item');
		button.addEventListener("click", () => {
			let label = document.querySelector('.checkbox-item').querySelectorAll('input');
			if (button.dataset.activ == 0) {
				button.textContent = "скрыть все товары";
				button.dataset.activ = 1;
			}
			else if (button.dataset.activ == 1) {
				button.textContent = "показать все товары";
				button.dataset.activ = 0;
			}
		});

		// <!--* Показ и сокрытие категорий-->
		let slot = {
			show_slot: function () {
				let slot = document.querySelector('.item-filter__checkbox-item').querySelectorAll('input');
				let but = document.querySelector('.button-item__all-item');
				let activ = {
					'but': but.dataset.activ,
					'checkEnable': [],
					'checkDusable': []
				}
				slot.forEach(s => {
					if (s.checked && s.name != 'kids') activ.checkEnable.push(s);
					else if (!s.checked && s.name != 'kids') activ.checkDusable.push(s);
				});
				if (activ.but == 0 && activ.checkEnable.length != 0) {
					document.querySelector('.catalog-item').style.display = "block";
					document.querySelector('.catalog-item__all-item').style.display = "none";
					activ.checkEnable.forEach(c => document.querySelector('div.' + c.name).style.display = "block");
					activ.checkDusable.forEach(c => document.querySelector('div.' + c.name).style.display = "none");
				}
				else if (activ.but == 1 && activ.checkEnable.length != 0) {
					document.querySelector('.catalog-item').style.display = "block";
					document.querySelector('.catalog-item__all-item').style.display = "block";
					activ.checkEnable.forEach(c => document.querySelector('div.' + c.name).style.display = "none");
					activ.checkDusable.forEach(c => document.querySelector('div.' + c.name).style.display = "none");
				}
				else if (activ.checkEnable.length == 0) {
					document.querySelector('.catalog-item').style.display = "none";
					document.querySelector('.catalog-item__all-item').style.display = "none";
					activ.checkDusable.forEach(c => document.querySelector('div.' + c.name).style.display = "none");
				}
			},
		}


		let s = document.querySelector('.item-filter__checkbox-item').querySelectorAll('input');
		s.forEach(c => {
			c.addEventListener('click', () => slot.show_slot());
		})
		let but = document.querySelector('.button-item__all-item');
		but.addEventListener('click', () => slot.show_slot());
		slot.show_slot();
	</script>
	<script src="js/pagination.js"></script>
	<script>
		// ajax_conect("men,women", 0, 3, 0);
		// ajax_conect("men,women", 0, 33, 1, true);

		function go() {
			let img_arr = document.querySelectorAll('li');
			img_arr.forEach(link => {
				link.addEventListener("click", () => {
					let img = link.querySelector('a');
					let up_elem = (iterac = 3) => {
						let parent_el = link.parentElement;
						for (i = 0; i < iterac; i++) {
							parent_el = parent_el.parentElement;
						}
						return parent_el;
					}
					console.log(up_elem());
					let old_img = up_elem().querySelector('img');
					old_img.addEventListener("animationend", () => {
						old_img.style.animationName = '';
					});
					old_img.style = "animation: hidden 0.4s linear 1 forwards";
					setTimeout(() => {
						old_img.src = img.href;
					}, 200);

				});
			})
		}
		go();
	</script>
</body>

</html>